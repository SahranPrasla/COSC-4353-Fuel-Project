<!DOCTYPE html>
<html>
<head>
    <title>Gallon Quote Form</title>
    <link rel="stylesheet" href="styles/QuoteForm.css">
</head>
<body>
    <!-- Fuel quote form component --> 

    <nav>
        <ul>
            <li><a href="ProfileManagement.html">Client Profile Management</a></li>
            <li><a href="GallonQuoteForm.html">Gallon Quote Form</a></li>
            <li><a href="FuelQuoteHistory.html">Fuel Quote History</a></li>
        </ul>
    </nav>

    <div id="container">
        
        <form method="POST" onsubmit="return validateForm()" action="FuelQuoteHistory.html">
            <h1>Gallon Quote Form</h1>
            <div class="groups">
                <div>
                    <label for="gallons-requested">Gallons requested:</label>
                    <input type="number" id="gallons-requested" name="gallons-requested" min="1" onkeyup="checkInputs()" required>
                </div>
                <div>
                    <label for="suggested-price">Suggested price / gallon:</label>
                    <input type="number" id="suggested-price" name="suggested-price" onkeyup="checkInputs()" readonly>
                </div>
            </div>
            <div class="groups">
                <div>
                    <label for="delivery-address">Delivery address:</label>
                    <input type="text" id="delivery-address" name="delivery-address" onkeyup="checkInputs()" readonly>
                </div>
                <div>
                    <label for="delivery-date">Delivery date:</label>
                    <input type="date" id="delivery-date" name="delivery-date" onkeyup="checkInputs()" required>
                </div>
            </div>
            <div id="total">
                <div>
                    <label for="total-amount-due">Total amount due:</label>
                    <input type="number" id="total-amount-due" name="total-amount-due" onkeyup="checkInputs()" readonly>
                </div>
            </div>
            <button id="quote-button" onsubmit="getQuote()" type="submit" disabled>Get Quote</button>
            <button id="submit-button" type="submit" disabled>Submit Order</button>
        </form>
    </div>
    <script>
        function checkInputs(){
            if(document.forms[0]["gallons-requested"].value.length > 0 && document.forms[0]["delivery-date"].value.length > 0){
                document.forms[0]["quote-button"].disabled = false;
            }
            else {
                var inputs = document.forms[0].getElementsByTagName("input");
                cansubmit = true;

                for (var i = 0; i < f.length; i++) {
                    if (f[i].value.length == 0) cansubmit = false;
                }

                if (cansubmit) {
                    document.getElementById('submitbutton').disabled = false;
                }
            }
        }

        function validateForm() {
            if (document.forms[0]["gallons-requested"].value == "" || document.forms[0]["delivery-date"].value == "") {
                alert("Please fill out all fields.");
                return false;
            }else if(document.forms[0]["delivery-date"].value < new Date().toISOString().split('T')[0]){
                alert("Please select a valid date.");
                return false;
            }
            return true;
        }  
    </script>
    <script src="./gallonQuoteFormServer.js"></script>
</body>

</html>